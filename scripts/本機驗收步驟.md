# 本機驗收步驟（Colab 第二步已完成時）

Colab 第二步已跑完、已下載 zip 後，照下面一步步做。

---

## Step 1：確認 zip 已下載

- 瀏覽器下載區應有一個 **`mlh_assets_and_data.zip`**（或 Colab 下載的檔名）。
- 若沒有，回 Colab 再跑一次第二段最後的 `files.download(...)`，或從 Colab 左側「檔案」找到 `mlh_assets_and_data.zip` 右鍵下載。

---

## Step 2：解壓 zip

- 雙擊 `mlh_assets_and_data.zip` 解壓（或右鍵 → 解壓）。
- 解壓後應得到一個 **`public`** 資料夾，裡面有：
  - `public/data/`（含 `index.json`、`questions_*.json`）
  - `public/assets/q/`（含各題庫資料夾與 PNG）

---

## Step 3：覆蓋專案的 public

- 把解壓出來的 **`public`** 整個資料夾，**覆蓋**到專案根目錄的 `public`。
- 專案根目錄路徑例：  
  `室內裝修管理/學科考古題/近十年考古AI`
- 也就是：用 zip 裡的 `public` 取代專案裡的 `public`（或把 zip 裡的 `public` 裡所有檔案複製進專案的 `public`）。

---

## Step 4：本機啟動並驗收

在終端機執行（專案根目錄）：

```bash
cd "/Users/jubylin/Desktop/室內裝修管理/學科考古題/近十年考古AI"
npm run dev
```

- 瀏覽器打開：**http://localhost:3000**
- 依下面「驗收檢查」逐項看。

---

## Step 5：驗收檢查（4 項）

1. **105/110 題庫**：選單能選到、不會「題庫載入失敗」；題目內容**沒有**「105 建築物室內裝修工程管理 乙 4-2(序 002)」這類頁首黏進選項或答案尾巴。
2. **答案**：隨便抽約 10 題，答案選項與正確答案對應正確、沒有明顯錯位。
3. **純文字題**：沒有圖的題目**不會**出現多餘截圖。
4. **CNS/圖題**：有圖的題（如 CNS 符號、左圖符號）題幹上方圖與題目一致、圖中**沒有**題號旁的 (1)(2)(3)(4)。

---

## Step 6：驗收通過後（可選）

若要清除舊亂碼檔再提交：

```bash
bash scripts/cleanup_legacy_assets.sh
```

然後提交與推送：

```bash
git add .
git commit -m "v1.2.2: fix parsing + image alignment + slug datasets"
git push
```

（若要打 tag：`git tag v1.2.2` → `git push --follow-tags`）

---

## 若驗收有問題

- **題庫載入失敗**：確認 `public/data/index.json` 存在，且 `public/data/questions_*.json` 檔名為英文 slug（如 `questions_y105.json`）。
- **解析/來源亂碼**：表示 Colab 用的腳本不是最新版，需重新打包「15 PDF + 最新 `scripts/import_pdfs_to_datasets.py`」再跑 Colab 第一段 + 第二段，重新下載 zip 再覆蓋 `public`。
- **圖題不對**：看 `scripts/import_report.json` 裡的 `mismatch_images`，依 `image_path` 開圖檢查。
